{"version":3,"sources":["webpack:///webpack/bootstrap c36d73e6c997fd5a133a","webpack:///./src/index.js","webpack:///./src/Swipe.js","webpack:///./src/utils.js","webpack:///./src/PubSub.js","webpack:///./src/ElementFactory.js","webpack:///./src/ScreenWatcher.js","webpack:///./src/ContentController.js","webpack:///./src/DataService.js"],"names":["App","pubSub","screenWatcher","elementFactory","dataService","wrapper","createWrapper","videoWrapper","querySelector","document","body","appendChild","contentController","swipe","getScreenWidth","window","app","start","Swipe","slideWidth","currentPageNumber","mouseDownPosition","mouseDownMargin","moveSlideHandler","bind","mousedownHandler","mouseUpHandler","pageClickHandler","pagging","saveLinksToDOMElement","bindEvents","footerNavUl","pageFooter","on","width","removeEventListener","addEventListener","pagesCount","Math","ceil","children","length","e","target","nodeName","clientX","targetTouches","parseInt","marginLeft","style","transition","mouseMovePosition","positionDifference","margin","calculatePagesCount","currentMargin","slideNumber","floor","marginLimit","controlLimit","turnPage","classList","contains","trigger","innerHTML","pageNumber","nextPageMargin","prevPageMargin","abs","childElementCount","firstChild","parentNode","remove","round","pageNumberListItems","add","i","getStyle","elem","getComputedStyle","currentStyle","createElem","tagName","text","classNames","tmp","createElement","textNode","createTextNode","PubSub","subscriptions","eventName","handler","push","args","forEach","item","setTimeout","apply","index","indexOf","splice","ElementFactory","createHeader","createMain","createFooter","header","nav","ul","liSearch","liBookmarks","liHistory","footer","main","inputWrapper","span","input","setAttribute","data","IDs","article","id","videoId","img","divDefinition","videoTitle","snippet","title","authorBox","author","channelTitle","videoDate","publishedAt","slice","videoDescription","description","divViews","statistics","viewCount","divLikes","likeCount","divBookmark","viewsIcon","likesIcon","bookmarkIcon","insertBefore","thumbnails","medium","url","articles","fragment","createDocumentFragment","createVideoInfo","createSearchListItem","li","searchText","searchData","localStorage","getItem","history","JSON","parse","reverse","createArticles","ScreenWatcher","resizeHandler","screenWidth","outerWidth","ContentController","videoWrapperContent","currentPageClass","pageMargin","inputSearchHandler","inputKeypressHandler","searchHistoryClickHandler","searchNowClickHandler","bookmarksClickHandler","addToBookmarkHandler","searchFormHistoryHandler","openYouTubeVideo","inputWrapperSpanElement","searchElement","currentPage","totalPage","getItems","searchValue","nextPageToken","then","items","pageFooterElement","inputElement","keyCode","clickEvent","Event","dispatchEvent","saveVideoWrapperContent","className","removeChild","clearContent","createSearchHistoryList","loadBookmarks","videoIDs","getVideoInfoById","createBookmarksList","val","nextElementSibling","value","createNoSearchResultMessage","youTubeSearchHistory","Date","toString","substr","setItem","stringify","toggle","youTubeBookmarks","deleteBookmarkFromVideoWrapperContent","previousElementSibling","click","open","DataService","nextPage","Promise","resolve","reject","xhr","XMLHttpRequest","send","onreadystatechange","readyState","responseText","idMovies","part","getVideoInfoByQuery","ids","map","idData","idItems"],"mappings":";AAAA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,uBAAe;AACf;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;ACtCA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;KAEMA,G;AACF,oBAAc;AAAA;;AACV,cAAKC,MAAL,GAAc,sBAAd;AACA,cAAKC,aAAL,GAAqB,4BAAkB,KAAKD,MAAvB,CAArB;AACA,cAAKE,cAAL,GAAsB,8BAAtB;AACA,cAAKC,WAAL,GAAmB,2BAAnB;AACH;;;;iCAEO;AACJ,iBAAMC,UAAU,KAAKF,cAAL,CAAoBG,aAApB,EAAhB;AACA,iBAAMC,eAAeF,QAAQG,aAAR,CAAsB,gBAAtB,CAArB;AACAC,sBAASC,IAAT,CAAcC,WAAd,CAA0BN,OAA1B;AACA,kBAAKO,iBAAL,GAAyB,gCACrB,KAAKT,cADgB,EAErB,KAAKC,WAFgB,EAGrBG,YAHqB,EAIrB,KAAKN,MAJgB,CAAzB;AAMA,kBAAKY,KAAL,GAAa,oBAAU,KAAKX,aAAL,CAAmBY,cAAnB,EAAV,EAA+CP,YAA/C,EAA6D,KAAKN,MAAlE,CAAb;AACH;;;;;;AAGLc,QAAOC,GAAP,GAAa,IAAIhB,GAAJ,EAAb;;AAEAe,QAAOC,GAAP,CAAWC,KAAX,G;;;;;;;;;;;;;;AChCA;;;;KAEMC,K;AACF,oBAAYC,UAAZ,EAAwBZ,YAAxB,EAAsCN,MAAtC,EAA8C;AAAA;;AAC1C,cAAKA,MAAL,GAAcA,MAAd;AACA,cAAKM,YAAL,GAAoBA,YAApB;AACA,cAAKY,UAAL,GAAkBA,UAAlB;AACA,cAAKC,iBAAL,GAAyB,CAAzB;AACA,cAAKC,iBAAL,GAAyB,IAAzB;AACA,cAAKC,eAAL,GAAuB,IAAvB;AACA,cAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBC,IAAtB,CAA2B,IAA3B,CAAxB;AACA,cAAKC,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBD,IAAtB,CAA2B,IAA3B,CAAxB;AACA,cAAKE,cAAL,GAAsB,KAAKA,cAAL,CAAoBF,IAApB,CAAyB,IAAzB,CAAtB;AACA,cAAKG,gBAAL,GAAwB,KAAKA,gBAAL,CAAsBH,IAAtB,CAA2B,IAA3B,CAAxB;AACA,cAAKI,OAAL,GAAe,KAAKA,OAAL,CAAaJ,IAAb,CAAkB,IAAlB,CAAf;AACA,cAAKK,qBAAL;AACA,cAAKC,UAAL;AACH;;;;iDAEuB;AACpB,kBAAKC,WAAL,GAAmBtB,SAASD,aAAT,CAAuB,gBAAvB,CAAnB;AACA,kBAAKwB,UAAL,GAAkBvB,SAASD,aAAT,CAAuB,cAAvB,CAAlB;AACH;;;sCAEY;AAAA;;AACT,kBAAKP,MAAL,CAAYgC,EAAZ,CAAe,2BAAf,EAA4C,UAACC,KAAD,EAAW;AACnD,uBAAKf,UAAL,GAAkBe,KAAlB;AACA,uBAAKN,OAAL;AACH,cAHD;AAIA,kBAAK3B,MAAL,CAAYgC,EAAZ,CAAe,iCAAf,EAAkD,YAAM;AACpD,uBAAK1B,YAAL,CAAkB4B,mBAAlB,CAAsC,eAAtC,EAAuD,MAAKP,OAA5D;AACA,uBAAKG,WAAL,CAAiBI,mBAAjB,CAAqC,OAArC,EAA8C,MAAKR,gBAAnD;AACAlB,0BAASC,IAAT,CAAcyB,mBAAd,CAAkC,WAAlC,EAA+C,MAAKV,gBAApD;AACAhB,0BAASC,IAAT,CAAcyB,mBAAd,CAAkC,SAAlC,EAA6C,MAAKT,cAAlD;AACAjB,0BAASC,IAAT,CAAcyB,mBAAd,CAAkC,YAAlC,EAAgD,MAAKV,gBAArD;AACAhB,0BAASC,IAAT,CAAcyB,mBAAd,CAAkC,UAAlC,EAA8C,MAAKT,cAAnD;AACH,cAPD;AAQA,kBAAKzB,MAAL,CAAYgC,EAAZ,CAAe,6BAAf,EAA8C,YAAM;AAChD,uBAAK1B,YAAL,CAAkB6B,gBAAlB,CAAmC,eAAnC,EAAoD,MAAKR,OAAzD;AACA,uBAAKG,WAAL,CAAiBK,gBAAjB,CAAkC,OAAlC,EAA2C,MAAKT,gBAAhD;AACAlB,0BAASC,IAAT,CAAc0B,gBAAd,CAA+B,WAA/B,EAA4C,MAAKX,gBAAjD;AACAhB,0BAASC,IAAT,CAAc0B,gBAAd,CAA+B,SAA/B,EAA0C,MAAKV,cAA/C;AACAjB,0BAASC,IAAT,CAAc0B,gBAAd,CAA+B,YAA/B,EAA6C,MAAKX,gBAAlD;AACAhB,0BAASC,IAAT,CAAc0B,gBAAd,CAA+B,UAA/B,EAA2C,MAAKV,cAAhD;AACA,uBAAKE,OAAL;AACH,cARD;AASA,kBAAK3B,MAAL,CAAYgC,EAAZ,CAAe,+BAAf,EAAgD,YAAM;AAClD,uBAAKL,OAAL;AACH,cAFD;AAGH;;;+CAEqB;AAClB,kBAAKS,UAAL,GAAkBC,KAAKC,IAAL,CAAU,KAAKhC,YAAL,CAAkBiC,QAAlB,CAA2BC,MAA3B,GAAoC,GAApC,GAA0C,KAAKtB,UAA/C,GAA4D,CAAtE,CAAlB;AACH;;;0CAEgBuB,C,EAAG;AAChB,iBAAIA,EAAEC,MAAF,CAASC,QAAT,KAAsB,OAAtB,IAAiCF,EAAEC,MAAF,CAASC,QAAT,KAAsB,IAA3D,EAAiE;AAC7D;AACH;AACD,iBAAIF,EAAEG,OAAN,EAAe;AACX,sBAAKxB,iBAAL,GAAyBqB,EAAEG,OAA3B;AACApC,0BAASC,IAAT,CAAc0B,gBAAd,CAA+B,WAA/B,EAA4C,KAAKb,gBAAjD;AACH,cAHD,MAGO;AACH,sBAAKF,iBAAL,GAAyBqB,EAAEI,aAAF,CAAgB,CAAhB,EAAmBD,OAA5C;AACApC,0BAASC,IAAT,CAAc0B,gBAAd,CAA+B,WAA/B,EAA4C,KAAKb,gBAAjD;AACH;AACD,kBAAKD,eAAL,GAAuByB,SAAS,qBAAS,KAAKxC,YAAd,EAA4ByC,UAArC,CAAvB;AACH;;;0CAEgBN,C,EAAG;AAChB,kBAAKnC,YAAL,CAAkB0C,KAAlB,CAAwBC,UAAxB,GAAqC,MAArC;AACA,iBAAMC,oBAAoBT,EAAEG,OAAF,IAAaH,EAAEI,aAAF,CAAgB,CAAhB,EAAmBD,OAA1D;AACA,iBAAIO,qBAAqBD,oBAAoB,KAAK9B,iBAAlD;AACA,iBAAMgC,SAAS,KAAK/B,eAAL,GAAuB8B,kBAAtC;AACA,kBAAK7C,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwCK,MAAxC;AACH;;;wCAEcX,C,EAAG;AACd,iBAAIA,EAAEC,MAAF,CAASC,QAAT,KAAsB,OAAtB,IAAiCF,EAAEC,MAAF,CAASC,QAAT,KAAsB,IAA3D,EAAiE;AAC7D;AACH;AACD,kBAAKU,mBAAL;AACA,kBAAK/C,YAAL,CAAkB0C,KAAlB,CAAwBC,UAAxB,GAAqC,MAArC;AACA,iBAAMK,gBAAgBR,SAAS,qBAAS,KAAKxC,YAAd,EAA4ByC,UAArC,CAAtB;AACA,kBAAKQ,WAAL,GAAmBlB,KAAKmB,KAAL,CAAWF,gBAAgB,KAAKpC,UAAhC,CAAnB;AACA,iBAAMuC,cAAc,EAAE,KAAKvC,UAAL,GAAkB,KAAKkB,UAAzB,CAApB;AACA,kBAAKsB,YAAL,CAAkBJ,aAAlB,EAAiCG,WAAjC;AACA,kBAAKE,QAAL,CAAcL,aAAd,EAA6BG,WAA7B;AACAjD,sBAASC,IAAT,CAAcyB,mBAAd,CAAkC,WAAlC,EAA+C,KAAKZ,gBAApD;AACAd,sBAASC,IAAT,CAAcyB,mBAAd,CAAkC,WAAlC,EAA+C,KAAKZ,gBAApD;AACH;;;0CAEgBmB,C,EAAG;AAChB,iBAAIA,EAAEC,MAAF,CAASC,QAAT,KAAsB,IAA1B,EAAgC;AAC5B;AACH;AACD,kBAAKrC,YAAL,CAAkB0C,KAAlB,CAAwBC,UAAxB,GAAqC,MAArC;AACA,iBAAIzC,SAASD,aAAT,CAAuB,oBAAvB,EAA6CqD,SAA7C,CAAuDC,QAAvD,CAAgE,QAAhE,CAAJ,EAA+E;AAC3E,sBAAK7D,MAAL,CAAY8D,OAAZ,CAAoB,kBAApB,EAAwCrB,EAAEC,MAAF,CAASqB,SAAT,GAAqB,CAA7D,EAAgE,KAAK3B,UAArE;AACH;AACD,iBAAM4B,aAAa,EAAEvB,EAAEC,MAAF,CAASqB,SAAT,GAAqB,CAAvB,CAAnB;AACA,kBAAKzD,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwCiB,aAAa,KAAK9C,UAA1D;AACH;;;sCAEYoC,a,EAAeG,W,EAAa;AACrC,kBAAKJ,mBAAL;AACA,iBAAIC,iBAAiB,CAArB,EAAwB;AACpB,sBAAKhD,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAqC,KAArC;AACH,cAFD,MAEO,IAAIO,gBAAgBG,WAApB,EAAiC;AACpC,sBAAKnD,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwCU,WAAxC;AACH;AACJ;;;kCAEQH,a,EAAeG,W,EAAa;AACjC,iBAAIH,gBAAgB,KAAKjC,eAArB,IAAwCiC,gBAAgBG,WAA5D,EAAyE;AACrE,qBAAMQ,iBAAiB,KAAKV,WAAL,GAAmB,KAAKrC,UAA/C;AACA,sBAAKZ,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwCkB,cAAxC;AACA,qBAAIzD,SAASD,aAAT,CAAuB,oBAAvB,EAA6CqD,SAA7C,CAAuDC,QAAvD,CAAgE,QAAhE,CAAJ,EAA+E;AAC3E,0BAAK7D,MAAL,CAAY8D,OAAZ,CAAoB,kBAApB,EAAwC,CAAC,KAAKP,WAA9C,EAA2D,KAAKnB,UAAhE;AACH;AACJ;AACD,iBAAIkB,gBAAgB,KAAKjC,eAArB,IAAwCiC,gBAAgB,CAA5D,EAA+D;AAC3D,qBAAMY,iBAAiB,CAAC,KAAKX,WAAL,GAAmB,CAApB,IAAyB,KAAKrC,UAArD;AACA,sBAAKZ,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwCmB,cAAxC;AACH;AACD,iBAAI7B,KAAK8B,GAAL,CAAS,KAAK9C,eAAL,GAAuBiC,aAAhC,IAAiD,EAArD,EAAyD;AAAE;AACvD,sBAAKhD,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwC,KAAK1B,eAA7C;AACH;AACJ;;;mCAES;AACN,iBACI,KAAKf,YAAL,CAAkB8D,iBAAlB,IACA,KAAK9D,YAAL,CAAkB+D,UAAlB,CAA6BT,SAA7B,CAAuCC,QAAvC,CAAgD,YAAhD,CAFJ,EAGE;AACE,sBAAK/B,WAAL,CAAiBwC,UAAjB,CAA4BA,UAA5B,CAAuCV,SAAvC,CAAiDW,MAAjD,CAAwD,QAAxD;AACA,sBAAKlB,mBAAL;AACH,cAND,MAMO;AACH;AACH;AACD,iBAAMC,gBAAgBR,SAAS,qBAAS,KAAKxC,YAAd,EAA4ByC,UAArC,CAAtB;AACA,kBAAK5B,iBAAL,GAAyBkB,KAAKmC,KAAL,CAAWnC,KAAK8B,GAAL,CAASb,gBAAgB,KAAKpC,UAA9B,CAAX,CAAzB;AACA,iBAAMuD,sBAAsB,KAAK3C,WAAL,CAAiBS,QAA7C;AACA,kBAAKT,WAAL,CAAiBvB,aAAjB,CAA+B,cAA/B,EAA+CqD,SAA/C,CAAyDW,MAAzD,CAAgE,aAAhE;AACA,iBAAI,KAAKzC,WAAL,CAAiBvB,aAAjB,CAA+B,YAA/B,CAAJ,EAAkD;AAC9C,sBAAKuB,WAAL,CAAiBvB,aAAjB,CAA+B,YAA/B,EAA6CqD,SAA7C,CAAuDW,MAAvD,CAA8D,WAA9D;AACH;AACD,iBAAI,KAAKpD,iBAAL,GAAyB,CAA7B,EAAgC;AAC5BsD,qCAAoB,CAApB,EAAuBb,SAAvB,CAAiCW,MAAjC,CAAwC,YAAxC;AACAE,qCAAoB,KAAKtD,iBAAzB,EAA4CyC,SAA5C,CAAsDc,GAAtD,CAA0D,aAA1D;AACA,qBAAID,oBAAoB,KAAKrC,UAAzB,CAAJ,EAA0C;AACtCqC,yCAAoB,KAAKrC,UAAzB,EAAqCwB,SAArC,CAA+Cc,GAA/C,CAAmD,WAAnD;AACH;AACD,sBAAK,IAAIC,IAAI,CAAb,EAAgBA,IAAI,CAApB,EAAuBA,GAAvB,EAA4B;AACxB,yBAAIA,IAAI,KAAKvC,UAAb,EAAyB;AACrBqC,6CAAoBE,CAApB,EAAuBZ,SAAvB,GAAmC,EAAnC;AACH,sBAFD,MAEO;AACHU,6CAAoBE,CAApB,EAAuBZ,SAAvB,GAAmCY,IAAI,CAAvC;AACH;AACJ;AACJ,cAbD,MAaO;AACHF,qCAAoB,CAApB,EAAuBb,SAAvB,CAAiCc,GAAjC,CAAqC,YAArC;AACA,sBAAK,IAAIC,KAAI,CAAb,EAAgBA,KAAI,CAApB,EAAuBA,IAAvB,EAA4B;AACxB,yBAAI,KAAKvC,UAAL,KAAoB,KAAKjB,iBAA7B,EAAgD;AAC5CsD,6CAAoBE,EAApB,EAAuBZ,SAAvB,GAAmC,KAAK5C,iBAAL,GAAyB,CAAzB,GAA6BwD,EAAhE;AACAF,6CAAoB,CAApB,EAAuBb,SAAvB,CAAiCc,GAAjC,CAAqC,aAArC;AACH,sBAHD,MAGO;AACHD,6CAAoBE,EAApB,EAAuBZ,SAAvB,GAAmC,KAAK5C,iBAAL,GAAyB,CAAzB,GAA6BwD,EAAhE;AACAF,6CAAoB,CAApB,EAAuBb,SAAvB,CAAiCc,GAAjC,CAAqC,aAArC;AACH;AACJ;AACJ;AACJ;;;;;;mBAGUzD,K;;;;;;;;;;;AC/KR,KAAM2D,8BAAW,SAAXA,QAAW,CAACC,IAAD,EAAU;AAC9B,YAAO/D,OAAOgE,gBAAP,GAA0BA,iBAAiBD,IAAjB,EAAuB,EAAvB,CAA1B,GAAuDA,KAAKE,YAAnE;AACH,EAFM;;AAIA,KAAMC,kCAAa,SAAbA,UAAa,CAACC,OAAD,EAAUC,IAAV,EAAkC;AAAA,uCAAfC,UAAe;AAAfA,mBAAe;AAAA;;AACxD,SAAMC,MAAM5E,SAAS6E,aAAT,CAAuBJ,OAAvB,CAAZ;AACAC,YAAOA,QAAQ,EAAf;AACA,SAAIC,UAAJ,EAAgB;AAAA;;AACZ,+BAAIvB,SAAJ,EAAcc,GAAd,uBAAqBS,UAArB;AACH;AACD,SAAMG,WAAW9E,SAAS+E,cAAT,CAAwBL,IAAxB,CAAjB;AACAE,SAAI1E,WAAJ,CAAgB4E,QAAhB;AACA,YAAOF,GAAP;AACH,EATM,C;;;;;;;;;;;;;;;;KCJDI,M;AACF,uBAAc;AAAA;;AACV,cAAKC,aAAL,GAAqB,EAArB;AACH;;;;4BAEEC,S,EAAWC,O,EAAS;AACnB,iBAAI,KAAKF,aAAL,CAAmBC,SAAnB,CAAJ,EAAmC;AAC/B,sBAAKD,aAAL,CAAmBC,SAAnB,EAA8BE,IAA9B,CAAmCD,OAAnC;AACH,cAFD,MAEO;AACH,sBAAKF,aAAL,CAAmBC,SAAnB,IAAgC,CAACC,OAAD,CAAhC;AACH;AACD,oBAAO,IAAP;AACH;;;iCAEOD,S,EAAoB;AAAA,+CAANG,IAAM;AAANA,qBAAM;AAAA;;AACxB,iBAAI,KAAKJ,aAAL,CAAmBC,SAAnB,CAAJ,EAAmC;AAC/B,sBAAKD,aAAL,CAAmBC,SAAnB,EAA8BI,OAA9B,CAAsC,UAACC,IAAD,EAAU;AAC5CC,gCAAW;AAAA,gCAAMD,KAAKE,KAAL,CAAW,IAAX,EAAiBJ,IAAjB,CAAN;AAAA,sBAAX,EAAyC,CAAzC;AACH,kBAFD;AAGH;AACD,oBAAO,IAAP;AACH;;;6BAEGH,S,EAAWC,O,EAAS;AACpB,iBAAI,CAAC,KAAKF,aAAL,CAAmBC,SAAnB,CAAL,EAAoC;AAChC;AACH,cAFD,MAEO;AACH,qBAAIQ,QAAQ,KAAKT,aAAL,CAAmBC,SAAnB,EAA8BS,OAA9B,CAAsCR,OAAtC,CAAZ;AACA,sBAAKF,aAAL,CAAmBC,SAAnB,EAA8BU,MAA9B,CAAqCF,KAArC,EAA4C,CAA5C;AACH;AACJ;;;;;;mBAGUV,M;;;;;;;;;;;;;;ACjCf;;;;KAEMa,c;;;;;;;yCAEc;AACZ,iBAAMjG,UAAU,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,SAAxB,CAAhB;AACAA,qBAAQM,WAAR,CAAoB,KAAK4F,YAAL,EAApB;AACAlG,qBAAQM,WAAR,CAAoB,KAAK6F,UAAL,EAApB;AACAnG,qBAAQM,WAAR,CAAoB,KAAK8F,YAAL,EAApB;AACA,oBAAOpG,OAAP;AACH;;;wCAEc;AACX,iBAAMqG,SAAS,uBAAW,QAAX,EAAqB,IAArB,EAA2B,aAA3B,CAAf;AACA,iBAAMC,MAAM,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,YAAxB,CAAZ;AACA,iBAAMC,KAAKnG,SAAS6E,aAAT,CAAuB,IAAvB,CAAX;AACA,iBAAMuB,WAAWpG,SAAS6E,aAAT,CAAuB,IAAvB,CAAjB;AACA,iBAAMwB,cAAcrG,SAAS6E,aAAT,CAAuB,IAAvB,CAApB;AACA,iBAAMyB,YAAYtG,SAAS6E,aAAT,CAAuB,IAAvB,CAAlB;AACAuB,sBAASlG,WAAT,CAAqB,uBAAW,MAAX,EAAmB,YAAnB,EAAiC,mBAAjC,EAAsD,QAAtD,CAArB;AACAmG,yBAAYnG,WAAZ,CAAwB,uBAAW,MAAX,EAAmB,WAAnB,EAAgC,WAAhC,CAAxB;AACAoG,uBAAUpG,WAAV,CAAsB,uBAAW,MAAX,EAAmB,gBAAnB,EAAqC,SAArC,CAAtB;AACAgG,iBAAIhG,WAAJ,CAAgBiG,EAAhB;AACAA,gBAAGjG,WAAH,CAAekG,QAAf;AACAD,gBAAGjG,WAAH,CAAemG,WAAf;AACAF,gBAAGjG,WAAH,CAAeoG,SAAf;AACAL,oBAAO/F,WAAP,CAAmBgG,GAAnB;AACA,oBAAOD,MAAP;AACH;;;wCAEc;AACX,iBAAMM,SAAS,uBAAW,QAAX,EAAqB,IAArB,EAA2B,aAA3B,EAA0C,QAA1C,CAAf;AACA,iBAAML,MAAM,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,YAAxB,CAAZ;AACA,iBAAMC,KAAKnG,SAAS6E,aAAT,CAAuB,IAAvB,CAAX;AACAsB,gBAAGjG,WAAH,CAAe,uBAAW,IAAX,EAAiB,CAAjB,EAAoB,aAApB,CAAf;AACAiG,gBAAGjG,WAAH,CAAe,uBAAW,IAAX,CAAf;AACAiG,gBAAGjG,WAAH,CAAe,uBAAW,IAAX,CAAf;AACAiG,gBAAGjG,WAAH,CAAe,uBAAW,IAAX,CAAf;AACAgG,iBAAIhG,WAAJ,CAAgBiG,EAAhB;AACAI,oBAAOrG,WAAP,CAAmBgG,GAAnB;AACA,oBAAOK,MAAP;AACH;;;sCAEY;AACT,iBAAMC,OAAOxG,SAAS6E,aAAT,CAAuB,MAAvB,CAAb;AACA,iBAAM4B,eAAe,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,eAAxB,CAArB;AACA,iBAAM3G,eAAe,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,eAAxB,CAArB;AACA,iBAAM4G,OAAO1G,SAAS6E,aAAT,CAAuB,MAAvB,CAAb;AACA,iBAAM8B,QAAQ3G,SAAS6E,aAAT,CAAuB,OAAvB,CAAd;AACA8B,mBAAMC,YAAN,CAAmB,MAAnB,EAA2B,MAA3B;AACAD,mBAAMC,YAAN,CAAmB,aAAnB,EAAkC,2BAAlC;AACAH,0BAAavG,WAAb,CAAyBwG,IAAzB;AACAD,0BAAavG,WAAb,CAAyByG,KAAzB;AACAH,kBAAKtG,WAAL,CAAiBuG,YAAjB;AACAD,kBAAKtG,WAAL,CAAiBJ,YAAjB;AACA,oBAAO0G,IAAP;AACH;;;yCAEeK,I,EAAMC,G,EAAK;AACvB,iBAAMC,UAAU,uBAAW,SAAX,EAAsB,IAAtB,EAA4B,YAA5B,CAAhB;AACA,iBAAMC,KAAK,OAAOH,KAAKG,EAAZ,KAAmB,QAAnB,GAA8BH,KAAKG,EAAnC,GAAwCH,KAAKG,EAAL,CAAQC,OAA3D;AACA,iBAAI,CAACH,IAAInB,OAAJ,CAAYqB,EAAZ,CAAL,EAAsB;AAClBD,yBAAQ3D,SAAR,CAAkBc,GAAlB,CAAsB,iBAAtB;AACH;AACD6C,qBAAQH,YAAR,CAAqB,IAArB,EAA2BI,EAA3B;AACA,iBAAME,MAAMlH,SAAS6E,aAAT,CAAuB,KAAvB,CAAZ;AACA,iBAAMsC,gBAAgB,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,YAAxB,CAAtB;AACA,iBAAMC,aAAa,uBAAW,IAAX,EAAiBP,KAAKQ,OAAL,CAAaC,KAA9B,EAAqC,aAArC,CAAnB;AACA,iBAAMC,YAAY,uBAAW,GAAX,EAAgB,IAAhB,EAAsB,YAAtB,CAAlB;AACA,iBAAMC,SAAS,uBAAW,MAAX,EAAmBX,KAAKQ,OAAL,CAAaI,YAAhC,EAA8C,QAA9C,CAAf;AACA,iBAAMC,YAAY,uBAAW,MAAX,EAAmBb,KAAKQ,OAAL,CAAaM,WAAb,CAAyBC,KAAzB,CAA+B,CAA/B,EAAkC,EAAlC,CAAnB,EAA0D,MAA1D,CAAlB;AACA,iBAAMC,mBAAmB,uBAAW,GAAX,EAAgBhB,KAAKQ,OAAL,CAAaS,WAA7B,EAA0C,aAA1C,CAAzB;AACA,iBAAMC,WAAW,uBAAW,KAAX,EAAkBlB,KAAKmB,UAAL,CAAgBC,SAAlC,EAA6C,OAA7C,CAAjB;AACA,iBAAMC,WAAW,uBAAW,KAAX,EAAkBrB,KAAKmB,UAAL,CAAgBG,SAAlC,EAA6C,OAA7C,CAAjB;AACA,iBAAMC,cAAc,uBAAW,KAAX,EAAkB,IAAlB,EAAwB,UAAxB,CAApB;AACA,iBAAMC,YAAY,uBAAW,GAAX,EAAgB,IAAhB,EAAsB,IAAtB,EAA4B,QAA5B,CAAlB;AACA,iBAAMC,YAAY,uBAAW,GAAX,EAAgB,IAAhB,EAAsB,IAAtB,EAA4B,gBAA5B,CAAlB;AACA,iBAAMC,eAAe,uBAAW,GAAX,EAAgB,IAAhB,EAAsB,IAAtB,EAA4B,eAA5B,CAArB;;AAEAxB,qBAAQ7G,WAAR,CAAoBgH,GAApB;AACAH,qBAAQ7G,WAAR,CAAoBiH,aAApB;AACAJ,qBAAQ7G,WAAR,CAAoB6H,QAApB;AACAhB,qBAAQ7G,WAAR,CAAoBgI,QAApB;AACAnB,qBAAQ7G,WAAR,CAAoBkI,WAApB;AACAb,uBAAUrH,WAAV,CAAsBsH,MAAtB;AACAD,uBAAUrH,WAAV,CAAsBwH,SAAtB;AACAP,2BAAcjH,WAAd,CAA0BkH,UAA1B;AACAD,2BAAcjH,WAAd,CAA0BqH,SAA1B;AACAJ,2BAAcjH,WAAd,CAA0B2H,gBAA1B;AACAO,yBAAYlI,WAAZ,CAAwBqI,YAAxB;AACAR,sBAASS,YAAT,CAAsBH,SAAtB,EAAiCN,SAASlE,UAA1C;AACAqE,sBAASM,YAAT,CAAsBF,SAAtB,EAAiCJ,SAASrE,UAA1C;;AAEAqD,iBAAIN,YAAJ,CAAiB,KAAjB,EAAwBC,KAAKQ,OAAL,CAAaoB,UAAb,CAAwBC,MAAxB,CAA+BC,GAAvD;AACAzB,iBAAIN,YAAJ,CAAiB,KAAjB,EAAwBC,KAAKQ,OAAL,CAAaC,KAArC;AACAF,wBAAWR,YAAX,CAAwB,OAAxB,EAAiCC,KAAKQ,OAAL,CAAaC,KAA9C;AACAC,uBAAUX,YAAV,CAAuB,OAAvB,EAAgCC,KAAKQ,OAAL,CAAaI,YAA7C;AACA,oBAAOV,OAAP;AACH;;;wCAEc6B,Q,EAAU9B,G,EAAK;AAC1B,iBAAM+B,WAAW7I,SAAS8I,sBAAT,EAAjB;AACA,kBAAK,IAAI3E,IAAI,CAAb,EAAgBA,IAAIyE,SAAS5G,MAA7B,EAAqCmC,GAArC,EAA0C;AACtC0E,0BAAS3I,WAAT,CAAqB,KAAK6I,eAAL,CAAqBH,SAASzE,CAAT,CAArB,EAAkC2C,GAAlC,CAArB;AACH;AACD,oBAAO+B,QAAP;AACH;;;mDAEyB;AACtB,sBAASG,oBAAT,CAA8BtE,IAA9B,EAAoCmC,IAApC,EAA0C;AACtC,qBAAMoC,KAAKjJ,SAAS6E,aAAT,CAAuB,IAAvB,CAAX;AACA,qBAAMqE,aAAa,uBAAW,MAAX,EAAmBxE,IAAnB,EAAyB,aAAzB,CAAnB;AACA,qBAAMyE,aAAa,uBAAW,MAAX,EAAmBtC,IAAnB,EAAyB,aAAzB,CAAnB;AACAoC,oBAAG/I,WAAH,CAAegJ,UAAf;AACAD,oBAAG/I,WAAH,CAAeiJ,UAAf;AACA,wBAAOF,EAAP;AACH;AACD,iBAAM9C,KAAK,uBAAW,IAAX,EAAiB,IAAjB,EAAuB,aAAvB,CAAX;AACA,iBAAI,CAACiD,aAAaC,OAAb,CAAqB,sBAArB,CAAL,EAAmD;AAC/ClD,oBAAGjG,WAAH,CAAe8I,qBACX,qCADW,CAAf;AAGA,wBAAO7C,EAAP;AACH;AACD,iBAAMmD,UAAUC,KAAKC,KAAL,CAAWJ,aAAaC,OAAb,CAAqB,sBAArB,CAAX,CAAhB;AACAC,qBAAQG,OAAR;AACA,kBAAK,IAAItF,IAAI,CAAb,EAAgBA,IAAImF,QAAQtH,MAA5B,EAAoCmC,GAApC,EAAyC;AACrCgC,oBAAGjG,WAAH,CAAe8I,qBAAqBM,QAAQnF,CAAR,EAAW,CAAX,CAArB,EAAoCmF,QAAQnF,CAAR,EAAW,CAAX,CAApC,CAAf;AACH;AACD,oBAAOgC,EAAP;AACH;;;6CAEoByC,Q,EAAU9B,G,EAAK;AAChC,iBAAI,CAAC8B,SAAS5G,MAAd,EAAsB;AAClB,qBAAMmE,KAAK,uBAAW,IAAX,EAAiB,IAAjB,EAAuB,aAAvB,CAAX;AACAA,oBAAGjG,WAAH,CAAe,uBACX,IADW,EAEX,gCAFW,CAAf;AAIA,wBAAOiG,EAAP;AACH,cAPD,MAOO;AACH,wBAAO,KAAKuD,cAAL,CAAoBd,QAApB,EAA8B9B,GAA9B,CAAP;AACH;AACJ;;;uDAE8B;AAC3B,iBAAMX,KAAK,uBAAW,IAAX,EAAiB,IAAjB,EAAuB,aAAvB,CAAX;AACAA,gBAAGjG,WAAH,CAAe,uBACX,IADW,EAEX,gCAFW,CAAf;AAIA,oBAAOiG,EAAP;AACH;;;;;;mBAGUN,c;;;;;;;;;;;;;;;;KC3JT8D,a;AACF,4BAAYnK,MAAZ,EAAoB;AAAA;;AAChB,cAAKA,MAAL,GAAcA,MAAd;AACA,cAAKoK,aAAL,GAAqB,KAAKA,aAAL,CAAmB7I,IAAnB,CAAwB,IAAxB,CAArB;AACAT,gBAAOqB,gBAAP,CAAwB,QAAxB,EAAkC,KAAKiI,aAAvC;AACH;;;;yCAEe;AACZ,iBAAMC,cAAc,KAAKxJ,cAAL,EAApB;AACA,kBAAKb,MAAL,CAAY8D,OAAZ,CAAoB,2BAApB,EAAiDuG,WAAjD;AACH;;;0CAEgB;AACb,iBAAMA,cAAcvJ,OAAOwJ,UAA3B;AACA,iBAAGD,cAAc,IAAjB,EAAuB;AACnB,wBAAO,IAAP;AACH,cAFD,MAEO,IAAIA,cAAc,IAAlB,EAAwB;AAC3B,wBAAO,IAAP;AACH,cAFM,MAEA,IAAIA,cAAc,GAAlB,EAAuB;AAC1B,wBAAO,GAAP;AACH;AACD,oBAAO,GAAP;AACH;;;;;;mBAGUF,a;;;;;;;;;;;;;;ACzBf;;;;KAEMI,iB;AACF,gCAAYrK,cAAZ,EAA4BC,WAA5B,EAAyCG,YAAzC,EAAuDN,MAAvD,EAA+D;AAAA;;AAC3D,cAAKE,cAAL,GAAsBA,cAAtB;AACA,cAAKC,WAAL,GAAmBA,WAAnB;AACA,cAAKG,YAAL,GAAoBA,YAApB;AACA,cAAKN,MAAL,GAAcA,MAAd;AACA,cAAKwK,mBAAL,GAA2B,EAA3B;AACA,cAAKC,gBAAL,GAAwB,QAAxB;AACA,cAAKC,UAAL,GAAkB,CAAlB;AACA,cAAKC,kBAAL,GAA0B,KAAKA,kBAAL,CAAwBpJ,IAAxB,CAA6B,IAA7B,CAA1B;AACA,cAAKqJ,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BrJ,IAA1B,CAA+B,IAA/B,CAA5B;AACA,cAAKsJ,yBAAL,GAAiC,KAAKA,yBAAL,CAA+BtJ,IAA/B,CAAoC,IAApC,CAAjC;AACA,cAAKuJ,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BvJ,IAA3B,CAAgC,IAAhC,CAA7B;AACA,cAAKwJ,qBAAL,GAA6B,KAAKA,qBAAL,CAA2BxJ,IAA3B,CAAgC,IAAhC,CAA7B;AACA,cAAKyJ,oBAAL,GAA4B,KAAKA,oBAAL,CAA0BzJ,IAA1B,CAA+B,IAA/B,CAA5B;AACA,cAAK0J,wBAAL,GAAgC,KAAKA,wBAAL,CAA8B1J,IAA9B,CAAmC,IAAnC,CAAhC;AACA,cAAK2J,gBAAL,GAAwB,KAAKA,gBAAL,CAAsB3J,IAAtB,CAA2B,IAA3B,CAAxB;AACA,cAAKK,qBAAL;AACA,cAAKC,UAAL;AACH;;;;sCAEY;AAAA;;AACTrB,sBAASD,aAAT,CAAuB,YAAvB,EAAqC4B,gBAArC,CACI,UADJ,EACgB,KAAKyI,oBADrB;AAGApK,sBAASD,aAAT,CAAuB,UAAvB,EAAmC4B,gBAAnC,CACI,OADJ,EACa,KAAK0I,yBADlB;AAGArK,sBAASD,aAAT,CAAuB,YAAvB,EAAqC4B,gBAArC,CACI,OADJ,EACa,KAAK4I,qBADlB;AAGA,kBAAKI,uBAAL,CAA6BhJ,gBAA7B,CACI,OADJ,EACa,KAAKwI,kBADlB;AAGA,kBAAKS,aAAL,CAAmBjJ,gBAAnB,CAAoC,OAApC,EAA6C,KAAK2I,qBAAlD;AACA,kBAAKxK,YAAL,CAAkB6B,gBAAlB,CAAmC,OAAnC,EAA4C,KAAK6I,oBAAjD;AACA,kBAAK1K,YAAL,CAAkB6B,gBAAlB,CAAmC,OAAnC,EAA4C,KAAK8I,wBAAjD;AACA,kBAAK3K,YAAL,CAAkB6B,gBAAlB,CAAmC,OAAnC,EAA4C,KAAK+I,gBAAjD;AACA,kBAAKlL,MAAL,CAAYgC,EAAZ,CAAe,kBAAf,EAAmC,UAACqJ,WAAD,EAAcC,SAAd,EAA4B;AAC3D,qBAAIA,YAAYD,WAAZ,IAA2B,CAA/B,EAAkC;AAC9B,2BAAKlL,WAAL,CAAiBoL,QAAjB,CAA0B,MAAKC,WAA/B,EAA4C,MAAKC,aAAjD,EACKC,IADL,CACU,UAACrE,IAAD,EAAU;AACZ,6BAAMgC,WAAW,MAAKnJ,cAAL,CAAoBgK,cAApB,CACb7C,KAAKsE,KADQ,EACD5B,KAAKC,KAAL,CAAWJ,aAAaC,OAAb,CAAqB,kBAArB,CAAX,KAAwD,EADvD,CAAjB;AAGA,+BAAKvJ,YAAL,CAAkBI,WAAlB,CAA8B2I,QAA9B;AACA,+BAAKrJ,MAAL,CAAY8D,OAAZ,CAAoB,+BAApB;AACA,+BAAK2H,aAAL,GAAqBpE,KAAKoE,aAA1B;AACH,sBARL;AASH;AACJ,cAZD;AAaH;;;iDAEuB;AACpB,kBAAKL,aAAL,GAAqB5K,SAASD,aAAT,CAAuB,SAAvB,CAArB;AACA,kBAAK4K,uBAAL,GAA+B3K,SAASD,aAAT,CAAuB,qBAAvB,CAA/B;AACA,kBAAKqL,iBAAL,GAAyBpL,SAASD,aAAT,CAAuB,cAAvB,CAAzB;AACA,kBAAKsL,YAAL,GAAoBrL,SAASD,aAAT,CAAuB,OAAvB,CAApB;AACH;;;8CAEoBkC,C,EAAG;AACpB,iBAAIA,EAAEqJ,OAAF,KAAc,EAAlB,EAAsB;AAClB;AACH;AACD,iBAAMC,aAAa,IAAIC,KAAJ,CAAU,OAAV,CAAnB;AACA,kBAAKb,uBAAL,CAA6Bc,aAA7B,CAA2CF,UAA3C;AACA,kBAAKX,aAAL,CAAmBa,aAAnB,CAAiCF,UAAjC;AACH;;;sCAEYG,uB,EAAyBC,S,EAAW1J,C,EAAG;AAChD,iBAAIA,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,MAA+BsI,SAA/B,KACA1J,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,mBAA5B,CADJ,EAEE;AACE,wBAAO,KAAP;AACH;AACD,iBAAIqI,uBAAJ,EAA6B;AACzB,qBAAI,KAAKzB,gBAAL,KAA0B,QAA9B,EAAwC;AACpC,0BAAKC,UAAL,GAAkB5H,SAAS,qBAAS,KAAKxC,YAAd,EAA4ByC,UAArC,CAAlB;AACH;AACD,sBAAKzC,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAqC,KAArC;AACA,qBAAI,CAAC,KAAKyH,mBAAL,CAAyBhI,MAA9B,EAAsC;AAClC,4BAAO,KAAKlC,YAAL,CAAkB+D,UAAzB,EAAqC;AACjC,8BAAKmG,mBAAL,CAAyB5E,IAAzB,CACI,KAAKtF,YAAL,CAAkB8L,WAAlB,CAA8B,KAAK9L,YAAL,CAAkB+D,UAAhD,CADJ;AAGH;AACJ,kBAND,MAMO;AACH,4BAAO,KAAK/D,YAAL,CAAkB+D,UAAzB,EAAqC;AACjC,8BAAK/D,YAAL,CAAkB8L,WAAlB,CAA8B,KAAK9L,YAAL,CAAkB+D,UAAhD;AACH;AACJ;AACJ,cAhBD,MAgBO;AACH,sBAAK/D,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAwC,KAAK2H,UAA7C;AACA,wBAAO,KAAKpK,YAAL,CAAkB+D,UAAzB,EAAqC;AACjC,0BAAK/D,YAAL,CAAkB8L,WAAlB,CAA8B,KAAK9L,YAAL,CAAkB+D,UAAhD;AACH;AACD,sBAAK,IAAIM,IAAI,CAAb,EAAgBA,IAAI,KAAK6F,mBAAL,CAAyBhI,MAA7C,EAAqDmC,GAArD,EAA0D;AACtD,0BAAKrE,YAAL,CAAkBI,WAAlB,CAA8B,KAAK8J,mBAAL,CAAyB7F,CAAzB,CAA9B;AACH;AACD,sBAAK6F,mBAAL,GAA2B,EAA3B;AACH;AACDhK,sBAASD,aAAT,CAAuB,oBAAvB,EAA6CqD,SAA7C,CAAuDW,MAAvD,CAA8D,mBAA9D;AACA/D,sBAASD,aAAT,OAA2B4L,SAA3B,EAAwCvI,SAAxC,CAAkDc,GAAlD,CAAsD,mBAAtD;AACA,kBAAK+F,gBAAL,GAAwB0B,SAAxB;AACA,kBAAKP,iBAAL,CAAuBhI,SAAvB,CAAiCc,GAAjC,CAAqC,QAArC;AACA,oBAAO,IAAP;AACH;;;mDAEyBjC,C,EAAG;AACzB,iBAAI,CAAC,KAAK4J,YAAL,CAAkB,IAAlB,EAAwB,SAAxB,EAAmC5J,CAAnC,CAAL,EAA4C;AACxC;AACH,cAFD,MAEO;AACH,qBAAM2C,MAAM,KAAKlF,cAAL,CAAoBoM,uBAApB,EAAZ;AACA,sBAAKhM,YAAL,CAAkBI,WAAlB,CAA8B0E,GAA9B;AACA,sBAAKpF,MAAL,CAAY8D,OAAZ,CAAoB,iCAApB;AACH;AACJ;;;+CAEqBrB,C,EAAG;AACrB,iBAAI,CAAC,KAAK4J,YAAL,CAAkB,KAAlB,EAAyB,QAAzB,EAAmC5J,CAAnC,CAAL,EAA4C;AACxC;AACH,cAFD,MAEO;AACH,sBAAKzC,MAAL,CAAY8D,OAAZ,CAAoB,6BAApB;AACH;AACJ;;;+CAEqBrB,C,EAAG;AACrB,iBAAI,CAAC,KAAK4J,YAAL,CAAkB,IAAlB,EAAwB,WAAxB,EAAqC5J,CAArC,CAAL,EAA8C;AAC1C;AACH,cAFD,MAEO;AACH,sBAAK8J,aAAL;AACH;AACJ;;;yCAEe;AAAA;;AACZ,iBAAMC,WAAWzC,KAAKC,KAAL,CAAWJ,aAAaC,OAAb,CAAqB,kBAArB,CAAX,CAAjB;AACA,iBAAI2C,YAAYA,SAAShK,MAAzB,EAAiC;AAC7B,sBAAKrC,WAAL,CAAiBsM,gBAAjB,CAAkCD,QAAlC,EAA4C,CAAC,SAAD,EAAY,YAAZ,CAA5C,EACKd,IADL,CACU,UAACrE,IAAD,EAAU;AACZ,yBAAMjC,MAAM,OAAKlF,cAAL,CAAoBwM,mBAApB,CAAwCrF,KAAKsE,KAA7C,EAAoDa,QAApD,CAAZ;AACA,4BAAKlM,YAAL,CAAkBI,WAAlB,CAA8B0E,GAA9B;AACA,4BAAKpF,MAAL,CAAY8D,OAAZ,CAAoB,6BAApB;AACH,kBALL;AAMH,cAPD,MAOO;AACH,qBAAMsB,MAAM,KAAKlF,cAAL,CAAoBwM,mBAApB,CAAwC,EAAxC,CAAZ;AACA,sBAAKpM,YAAL,CAAkBI,WAAlB,CAA8B0E,GAA9B;AACA,sBAAKpF,MAAL,CAAY8D,OAAZ,CAAoB,iCAApB;AACH;AACJ;;;4CAEkBrB,C,EAAG;AAAA;;AAClB,iBAAMsJ,aAAa,IAAIC,KAAJ,CAAU,OAAV,CAAnB;AACA,kBAAKZ,aAAL,CAAmBa,aAAnB,CAAiCF,UAAjC;AACA,kBAAK/L,MAAL,CAAY8D,OAAZ,CAAoB,6BAApB;AACA,iBAAM6I,MAAMlK,EAAEC,MAAF,CAASkK,kBAAT,CAA4BC,KAAxC;AACA,iBAAIF,QAAQ,EAAR,IAAc,KAAKnB,WAAL,KAAqBmB,GAAvC,EAA4C;AACxC;AACH;AACD,kBAAKrM,YAAL,CAAkB0C,KAAlB,CAAwBD,UAAxB,GAAqC,KAArC;AACA,oBAAO,KAAKzC,YAAL,CAAkB+D,UAAzB,EAAqC;AACjC,sBAAK/D,YAAL,CAAkB8L,WAAlB,CAA8B,KAAK9L,YAAL,CAAkB+D,UAAhD;AACH;AACD,kBAAKlE,WAAL,CAAiBoL,QAAjB,CAA0BoB,GAA1B,EACKjB,IADL,CACU,UAACrE,IAAD,EAAU;AACZ,qBAAI,CAACA,KAAKsE,KAAL,CAAWnJ,MAAhB,EAAwB;AACpB,4BAAKxC,MAAL,CAAY8D,OAAZ,CAAoB,iCAApB;AACA,4BAAKxD,YAAL,CAAkBI,WAAlB,CACI,OAAKR,cAAL,CAAoB4M,2BAApB,EADJ;AAGH;AACD,qBAAMzD,WAAW,OAAKnJ,cAAL,CAAoBgK,cAApB,CAAmC7C,KAAKsE,KAAxC,EACb5B,KAAKC,KAAL,CAAWJ,aAAaC,OAAb,CAAqB,kBAArB,CAAX,KAAwD,EAD3C,CAAjB;AAGA,wBAAKvJ,YAAL,CAAkBI,WAAlB,CAA8B2I,QAA9B;AACA,wBAAKmC,WAAL,GAAmBmB,GAAnB;AACA,wBAAK3M,MAAL,CAAY8D,OAAZ,CAAoB,+BAApB;AACA,wBAAK2H,aAAL,GAAqBpE,KAAKoE,aAA1B;AACH,cAfL;AAgBA,iBAAMsB,uBAAuBhD,KAAKC,KAAL,CAAWJ,aAAaC,OAAb,CAAqB,sBAArB,CAAX,CAA7B;AACA,iBAAIkD,oBAAJ,EAA0B;AACtB,sBAAK,IAAIpI,IAAI,CAAb,EAAgBA,IAAIoI,qBAAqBvK,MAAzC,EAAiDmC,GAAjD,EAAsD;AAClD,yBAAIoI,qBAAqBpI,CAArB,EAAwB,CAAxB,MAA+BgI,GAAnC,EAAwC;AACpCI,8CAAqB3G,MAArB,CAA4BzB,CAA5B,EAA+B,CAA/B;AACH;AACJ;AACDoI,sCAAqBnH,IAArB,CAA0B,CAAC+G,GAAD,EAAO,IAAIK,IAAJ,EAAD,CAAaC,QAAb,GAAwBC,MAAxB,CAA+B,CAA/B,EAAkC,EAAlC,CAAN,CAA1B;AACA,qBAAIH,qBAAqBvK,MAArB,GAA8B,EAAlC,EAAsC;AAClCuK,0CAAqB3G,MAArB,CAA4B,CAA5B,EAA+B,CAA/B;AACH;AACDwD,8BAAauD,OAAb,CAAqB,sBAArB,EAA6CpD,KAAKqD,SAAL,CAAeL,oBAAf,CAA7C;AACA;AACH;AACD,iBAAM3H,MAAM,CAAC,CAACuH,GAAD,EAAO,IAAIK,IAAJ,EAAD,CAAaC,QAAb,GAAwBC,MAAxB,CAA+B,CAA/B,EAAkC,EAAlC,CAAN,CAAD,CAAZ;AACAtD,0BAAauD,OAAb,CAAqB,sBAArB,EAA6CpD,KAAKqD,SAAL,CAAehI,GAAf,CAA7C;AACH;;;+DAEqCoC,E,EAAI;AACtC,kBAAK,IAAI7C,IAAI,CAAb,EAAgBA,IAAI,KAAK6F,mBAAL,CAAyBhI,MAA7C,EAAqDmC,GAArD,EAA0D;AACtD,qBAAI,KAAK6F,mBAAL,CAAyB7F,CAAzB,EAA4B6C,EAA5B,KAAmCA,EAAvC,EAA2C;AACvC,0BAAKgD,mBAAL,CAAyB7F,CAAzB,EAA4Bf,SAA5B,CAAsCW,MAAtC,CAA6C,iBAA7C;AACH;AACJ;AACJ;;;8CAEoB9B,C,EAAG;AACpB,iBAAI,CAACA,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,eAA5B,CAAL,EAAmD;AAC/C;AACH;AACD,iBAAM2D,KAAK/E,EAAEC,MAAF,CAAS4B,UAAT,CAAoBA,UAApB,CAA+BkD,EAA1C;AACA/E,eAAEC,MAAF,CAAS4B,UAAT,CAAoBA,UAApB,CAA+BV,SAA/B,CAAyCyJ,MAAzC,CAAgD,iBAAhD;AACA,iBAAMC,mBAAmBvD,KAAKC,KAAL,CAAWJ,aAAaC,OAAb,CAAqB,kBAArB,CAAX,CAAzB;AACA,iBAAIyD,gBAAJ,EAAsB;AAClB,sBAAK,IAAI3I,IAAI,CAAb,EAAgBA,IAAI2I,iBAAiB9K,MAArC,EAA6CmC,GAA7C,EAAkD;AAC9C,yBAAI2I,iBAAiB3I,CAAjB,MAAwB6C,EAA5B,EAAgC;AAC5B,8BAAK+F,qCAAL,CACID,iBAAiBlH,MAAjB,CAAwBzB,CAAxB,EAA2B,CAA3B,EAA8BsI,QAA9B,EADJ;AAGArD,sCAAauD,OAAb,CAAqB,kBAArB,EAAyCpD,KAAKqD,SAAL,CAAeE,gBAAf,CAAzC;AACA;AACH;AACJ;AACDA,kCAAiB1H,IAAjB,CAAsB4B,EAAtB;AACAoC,8BAAauD,OAAb,CAAqB,kBAArB,EAAyCpD,KAAKqD,SAAL,CAAeE,gBAAf,CAAzC;AACA;AACH;AACD,iBAAMlI,MAAM,CAAC3C,EAAEC,MAAF,CAAS4B,UAAT,CAAoBA,UAApB,CAA+BkD,EAAhC,CAAZ;AACAoC,0BAAauD,OAAb,CAAqB,kBAArB,EAAyCpD,KAAKqD,SAAL,CAAehI,GAAf,CAAzC;AACH;;;kDAEwB3C,C,EAAG;AACxB,iBACI,CAACA,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,aAA5B,CAAD,IACA,CAACpB,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,aAA5B,CAFL,EAGE;AACE;AACH;AACD,iBAAIpB,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,aAA5B,CAAJ,EAAgD;AAC5C,sBAAKgI,YAAL,CAAkBgB,KAAlB,GAA0BpK,EAAEC,MAAF,CAASqB,SAAnC;AACH;AACD,iBAAItB,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,aAA5B,CAAJ,EAAgD;AAC5C,sBAAKgI,YAAL,CAAkBgB,KAAlB,GAA0BpK,EAAEC,MAAF,CAAS8K,sBAAT,CAAgCzJ,SAA1D;AACH;AACD,iBAAM0J,QAAQ,IAAIzB,KAAJ,CAAU,OAAV,CAAd;AACA,kBAAKZ,aAAL,CAAmBa,aAAnB,CAAiCwB,KAAjC;AACA,kBAAKtC,uBAAL,CAA6Bc,aAA7B,CAA2CwB,KAA3C;AACH;;;0CAEgBhL,C,EAAG;AAChB,iBAAI,CAACA,EAAEC,MAAF,CAASkB,SAAT,CAAmBC,QAAnB,CAA4B,aAA5B,CAAL,EAAiD;AAC7C;AACH;AACD,iBAAM2D,KAAK/E,EAAEC,MAAF,CAAS4B,UAAT,CAAoBA,UAApB,CAA+BkD,EAA1C;AACA1G,oBAAO4M,IAAP,sCAA+ClG,EAA/C;AACH;;;;;;mBAGU+C,iB;;;;;;;;;;;;;;;;KClQToD,W;;;;;;;6CACkBhB,G,EAAKiB,Q,EAAU;AAC/B,oBAAO,IAAIC,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,qBAAMC,MAAM,IAAIC,cAAJ,EAAZ;AACA,qBAAIL,QAAJ,EAAc;AACVI,yBAAIN,IAAJ,CACI,KADJ,EAEI,kDACA,8CADA,GAEA,aAFA,GAGA,eAHA,GAIA,gBAJA,mBAKaE,QALb,kBAMKjB,GANL,OAFJ,EASI,IATJ;AAWH,kBAZD,MAYO;AACHqB,yBAAIN,IAAJ,CACI,KADJ,EAEI,kDACA,8CADA,GAEA,aAFA,GAGA,eAHA,GAIA,gBAJA,WAKKf,GALL,OAFJ,EAQI,IARJ;AAUH;AACDqB,qBAAIE,IAAJ;AACAF,qBAAIG,kBAAJ,GAAyB,YAAM;AAC3B,yBAAIH,IAAII,UAAJ,KAAmB,CAAvB,EAA0B;AACtB;AACH;AACDN,6BAAQ/D,KAAKC,KAAL,CAAWgE,IAAIK,YAAf,CAAR;AACH,kBALD;AAMH,cAjCM,CAAP;AAkCH;;;0CAEgBC,Q,EAAUC,I,EAAM;AAC7B,oBAAO,IAAIV,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpC,qBAAMC,MAAM,IAAIC,cAAJ,EAAZ;AACAD,qBAAIN,IAAJ,CACI,KADJ,EAEI,kDACA,8CADA,cAEQa,IAFR,mBAGMD,QAHN,CAFJ,EAMI,IANJ;AAQAN,qBAAIE,IAAJ;AACAF,qBAAIG,kBAAJ,GAAyB,YAAM;AAC3B,yBAAIH,IAAII,UAAJ,KAAmB,CAAvB,EAA0B;AACtB;AACH;AACDN,6BAAQ/D,KAAKC,KAAL,CAAWgE,IAAIK,YAAf,CAAR;AACH,kBALD;AAMH,cAjBM,CAAP;AAkBH;;;kCAEQ1B,G,EAAKiB,Q,EAAU;AAAA;;AACpB,oBAAO,KAAKY,mBAAL,CAAyB7B,GAAzB,EAA8BiB,QAA9B,EACFlC,IADE,CACG,UAACrE,IAAD,EAAU;AACZ,qBAAMsE,QAAQtE,KAAKsE,KAAnB;AACA,qBAAM8C,MAAM9C,MAAM+C,GAAN,CAAU;AAAA,4BAAQ3I,KAAKyB,EAAL,CAAQC,OAAhB;AAAA,kBAAV,CAAZ;AACA,qBAAMgE,gBAAgBpE,KAAKoE,aAA3B;AACA,wBAAO,MAAKgB,gBAAL,CAAsBgC,GAAtB,EAA2B,CAAC,SAAD,EAAY,YAAZ,CAA3B,EACF/C,IADE,CACG,UAACiD,MAAD,EAAY;AACd,yBAAMC,UAAUD,OAAOhD,KAAvB;AACA,0BAAK,IAAIhH,IAAI,CAAb,EAAgBA,IAAIgH,MAAMnJ,MAA1B,EAAkCmC,GAAlC,EAAuC;AACnCgH,+BAAMhH,CAAN,EAAS6D,UAAT,GAAsBoG,QAAQjK,CAAR,EAAW6D,UAAjC;AACAmD,+BAAMhH,CAAN,EAASkD,OAAT,GAAmB+G,QAAQjK,CAAR,EAAWkD,OAA9B;AACH;AACD,4BAAO;AACH8D,qCADG;AAEHF;AAFG,sBAAP;AAIH,kBAXE,CAAP;AAYH,cAjBE,CAAP;AAkBH;;;;;;mBAGUkC,W","file":"bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap c36d73e6c997fd5a133a","import Swipe from './Swipe.js';\r\nimport PubSub from './PubSub.js';\r\nimport ElementFactory from './ElementFactory.js';\r\nimport ScreenWatcher from './ScreenWatcher.js';\r\nimport ContentController from './ContentController.js';\r\nimport DataService from './DataService.js';\r\nimport {createElem} from './utils.js';\r\n\r\nclass App {\r\n    constructor() {\r\n        this.pubSub = new PubSub();\r\n        this.screenWatcher = new ScreenWatcher(this.pubSub);\r\n        this.elementFactory = new ElementFactory();\r\n        this.dataService = new DataService();\r\n    }\r\n\r\n    start() {\r\n        const wrapper = this.elementFactory.createWrapper();\r\n        const videoWrapper = wrapper.querySelector('.video-wrapper');\r\n        document.body.appendChild(wrapper);\r\n        this.contentController = new ContentController(\r\n            this.elementFactory,\r\n            this.dataService,\r\n            videoWrapper,\r\n            this.pubSub\r\n        );\r\n        this.swipe = new Swipe(this.screenWatcher.getScreenWidth(), videoWrapper, this.pubSub);\r\n    }\r\n}\r\n\r\nwindow.app = new App();\r\n\r\nwindow.app.start();\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import {getStyle} from './utils.js';\r\n\r\nclass Swipe {\r\n    constructor(slideWidth, videoWrapper, pubSub) {\r\n        this.pubSub = pubSub;\r\n        this.videoWrapper = videoWrapper;\r\n        this.slideWidth = slideWidth;\r\n        this.currentPageNumber = 0;\r\n        this.mouseDownPosition = null;\r\n        this.mouseDownMargin = null;\r\n        this.moveSlideHandler = this.moveSlideHandler.bind(this);\r\n        this.mousedownHandler = this.mousedownHandler.bind(this);\r\n        this.mouseUpHandler = this.mouseUpHandler.bind(this);\r\n        this.pageClickHandler = this.pageClickHandler.bind(this);\r\n        this.pagging = this.pagging.bind(this);\r\n        this.saveLinksToDOMElement();\r\n        this.bindEvents();\r\n    }\r\n\r\n    saveLinksToDOMElement() {\r\n        this.footerNavUl = document.querySelector('.footer-nav ul');\r\n        this.pageFooter = document.querySelector('.page-footer');\r\n    }\r\n\r\n    bindEvents() {\r\n        this.pubSub.on('ScreenWatcher:changeWidth', (width) => {\r\n            this.slideWidth = width;\r\n            this.pagging();\r\n        });\r\n        this.pubSub.on('ContentController:searchHistory', () => {\r\n            this.videoWrapper.removeEventListener('transitionend', this.pagging);\r\n            this.footerNavUl.removeEventListener('click', this.pageClickHandler);\r\n            document.body.removeEventListener('mousedown', this.mousedownHandler);\r\n            document.body.removeEventListener('mouseup', this.mouseUpHandler);\r\n            document.body.removeEventListener('touchstart', this.mousedownHandler);\r\n            document.body.removeEventListener('touchend', this.mouseUpHandler);\r\n        });\r\n        this.pubSub.on('ContentController:searchNow', () => {\r\n            this.videoWrapper.addEventListener('transitionend', this.pagging);\r\n            this.footerNavUl.addEventListener('click', this.pageClickHandler);\r\n            document.body.addEventListener('mousedown', this.mousedownHandler);\r\n            document.body.addEventListener('mouseup', this.mouseUpHandler);\r\n            document.body.addEventListener('touchstart', this.mousedownHandler);\r\n            document.body.addEventListener('touchend', this.mouseUpHandler);\r\n            this.pagging();\r\n        });\r\n        this.pubSub.on('ContentController:newArticles', () => {\r\n            this.pagging();\r\n        });\r\n    }\r\n\r\n    calculatePagesCount() {\r\n        this.pagesCount = Math.ceil(this.videoWrapper.children.length * 365 / this.slideWidth - 1);\r\n    }\r\n\r\n    mousedownHandler(e) {\r\n        if (e.target.nodeName === 'INPUT' || e.target.nodeName === 'LI') {\r\n            return;\r\n        }\r\n        if (e.clientX) {\r\n            this.mouseDownPosition = e.clientX;\r\n            document.body.addEventListener('mousemove', this.moveSlideHandler);\r\n        } else {\r\n            this.mouseDownPosition = e.targetTouches[0].clientX;\r\n            document.body.addEventListener('touchmove', this.moveSlideHandler);\r\n        }\r\n        this.mouseDownMargin = parseInt(getStyle(this.videoWrapper).marginLeft);\r\n    }\r\n\r\n    moveSlideHandler(e) {\r\n        this.videoWrapper.style.transition = 'none';\r\n        const mouseMovePosition = e.clientX || e.targetTouches[0].clientX;\r\n        let positionDifference = mouseMovePosition - this.mouseDownPosition;\r\n        const margin = this.mouseDownMargin + positionDifference;\r\n        this.videoWrapper.style.marginLeft = `${margin}px`;\r\n    }\r\n\r\n    mouseUpHandler(e) {\r\n        if (e.target.nodeName === 'INPUT' || e.target.nodeName === 'LI') {\r\n            return;\r\n        }\r\n        this.calculatePagesCount();\r\n        this.videoWrapper.style.transition = '0.5s';\r\n        const currentMargin = parseInt(getStyle(this.videoWrapper).marginLeft);\r\n        this.slideNumber = Math.floor(currentMargin / this.slideWidth);\r\n        const marginLimit = -(this.slideWidth * this.pagesCount);\r\n        this.controlLimit(currentMargin, marginLimit);\r\n        this.turnPage(currentMargin, marginLimit);\r\n        document.body.removeEventListener('mousemove', this.moveSlideHandler);\r\n        document.body.removeEventListener('touchmove', this.moveSlideHandler);\r\n    }\r\n\r\n    pageClickHandler(e) {\r\n        if (e.target.nodeName !== 'LI') {\r\n            return;\r\n        }\r\n        this.videoWrapper.style.transition = '0.5s';\r\n        if (document.querySelector('.active-header-nav').classList.contains('search')) {\r\n            this.pubSub.trigger('Swipe:swipeRight', e.target.innerHTML - 1, this.pagesCount);\r\n        }\r\n        const pageNumber = -(e.target.innerHTML - 1);\r\n        this.videoWrapper.style.marginLeft = `${pageNumber * this.slideWidth}px`;\r\n    }\r\n\r\n    controlLimit(currentMargin, marginLimit) {\r\n        this.calculatePagesCount();\r\n        if (currentMargin >= 0) {\r\n            this.videoWrapper.style.marginLeft = '0px';\r\n        } else if (currentMargin < marginLimit) {\r\n            this.videoWrapper.style.marginLeft = `${marginLimit}px`;\r\n        }\r\n    }\r\n\r\n    turnPage(currentMargin, marginLimit) {\r\n        if (currentMargin < this.mouseDownMargin && currentMargin > marginLimit) {\r\n            const nextPageMargin = this.slideNumber * this.slideWidth;\r\n            this.videoWrapper.style.marginLeft = `${nextPageMargin}px`;\r\n            if (document.querySelector('.active-header-nav').classList.contains('search')) {\r\n                this.pubSub.trigger('Swipe:swipeRight', -this.slideNumber, this.pagesCount);\r\n            }\r\n        }\r\n        if (currentMargin > this.mouseDownMargin && currentMargin < 0) {\r\n            const prevPageMargin = (this.slideNumber + 1) * this.slideWidth;\r\n            this.videoWrapper.style.marginLeft = `${prevPageMargin}px`;\r\n        }\r\n        if (Math.abs(this.mouseDownMargin - currentMargin) < 20) { // for incorrect click or mobile scrolling\r\n            this.videoWrapper.style.marginLeft = `${this.mouseDownMargin}px`;\r\n        }\r\n    }\r\n\r\n    pagging() {\r\n        if (\r\n            this.videoWrapper.childElementCount &&\r\n            this.videoWrapper.firstChild.classList.contains('video-info')\r\n        ) {\r\n            this.footerNavUl.parentNode.parentNode.classList.remove('hidden');\r\n            this.calculatePagesCount();\r\n        } else {\r\n            return;\r\n        }\r\n        const currentMargin = parseInt(getStyle(this.videoWrapper).marginLeft);\r\n        this.currentPageNumber = Math.round(Math.abs(currentMargin / this.slideWidth));\r\n        const pageNumberListItems = this.footerNavUl.children;\r\n        this.footerNavUl.querySelector('.active-page').classList.remove('active-page');\r\n        if (this.footerNavUl.querySelector('.no-border')) {\r\n            this.footerNavUl.querySelector('.no-border').classList.remove('no-border');\r\n        }\r\n        if (this.currentPageNumber < 3) {\r\n            pageNumberListItems[0].classList.remove('add-pseudo');\r\n            pageNumberListItems[this.currentPageNumber].classList.add('active-page');\r\n            if (pageNumberListItems[this.pagesCount]) {\r\n                pageNumberListItems[this.pagesCount].classList.add('no-border');\r\n            }\r\n            for (let i = 1; i < 4; i++) {\r\n                if (i > this.pagesCount) {\r\n                    pageNumberListItems[i].innerHTML = '';\r\n                } else {\r\n                    pageNumberListItems[i].innerHTML = i + 1;\r\n                }\r\n            }\r\n        } else {\r\n            pageNumberListItems[0].classList.add('add-pseudo');\r\n            for (let i = 1; i < 4; i++) {\r\n                if (this.pagesCount === this.currentPageNumber) {\r\n                    pageNumberListItems[i].innerHTML = this.currentPageNumber - 2 + i;\r\n                    pageNumberListItems[3].classList.add('active-page');\r\n                } else {\r\n                    pageNumberListItems[i].innerHTML = this.currentPageNumber - 1 + i;\r\n                    pageNumberListItems[2].classList.add('active-page');\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\n\r\nexport default Swipe;\n\n\n// WEBPACK FOOTER //\n// ./src/Swipe.js","export const getStyle = (elem) => {\r\n    return window.getComputedStyle ? getComputedStyle(elem, \"\") : elem.currentStyle;\r\n};\r\n\r\nexport const createElem = (tagName, text, ...classNames) => {\r\n    const tmp = document.createElement(tagName);\r\n    text = text || '';\r\n    if (classNames) {\r\n        tmp.classList.add(...classNames);\r\n    }\r\n    const textNode = document.createTextNode(text);\r\n    tmp.appendChild(textNode);\r\n    return tmp;\r\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","class PubSub {\r\n    constructor() {\r\n        this.subscriptions = {};\r\n    }\r\n\r\n    on(eventName, handler) {\r\n        if (this.subscriptions[eventName]) {\r\n            this.subscriptions[eventName].push(handler);\r\n        } else {\r\n            this.subscriptions[eventName] = [handler];\r\n        }\r\n        return this;\r\n    }\r\n\r\n    trigger(eventName, ...args) {\r\n        if (this.subscriptions[eventName]) {\r\n            this.subscriptions[eventName].forEach((item) => {\r\n                setTimeout(() => item.apply(null, args), 0);\r\n            });\r\n        }\r\n        return this;\r\n    }\r\n\r\n    off(eventName, handler) {\r\n        if (!this.subscriptions[eventName]) {\r\n            return;\r\n        } else {\r\n            let index = this.subscriptions[eventName].indexOf(handler);\r\n            this.subscriptions[eventName].splice(index, 1);\r\n        }\r\n    }\r\n}\r\n\r\nexport default PubSub;\n\n\n// WEBPACK FOOTER //\n// ./src/PubSub.js","import {createElem} from './utils.js';\r\n\r\nclass ElementFactory {\r\n\r\n    createWrapper() {\r\n        const wrapper = createElem('div', null, 'wrapper');\r\n        wrapper.appendChild(this.createHeader());\r\n        wrapper.appendChild(this.createMain());\r\n        wrapper.appendChild(this.createFooter());\r\n        return wrapper;\r\n    }\r\n\r\n    createHeader() {\r\n        const header = createElem('header', null, 'page-header');\r\n        const nav = createElem('nav', null, 'header-nav');\r\n        const ul = document.createElement('ul');\r\n        const liSearch = document.createElement('li');\r\n        const liBookmarks = document.createElement('li');\r\n        const liHistory = document.createElement('li');\r\n        liSearch.appendChild(createElem('span', 'Search now', 'active-header-nav', 'search'));\r\n        liBookmarks.appendChild(createElem('span', 'Bookmarks', 'bookmarks'));\r\n        liHistory.appendChild(createElem('span', 'Search history', 'history'));\r\n        nav.appendChild(ul);\r\n        ul.appendChild(liSearch);\r\n        ul.appendChild(liBookmarks);\r\n        ul.appendChild(liHistory);\r\n        header.appendChild(nav);\r\n        return header;\r\n    }\r\n\r\n    createFooter() {\r\n        const footer = createElem('footer', null, 'page-footer', 'hidden');\r\n        const nav = createElem('nav', null, 'footer-nav');\r\n        const ul = document.createElement('ul');\r\n        ul.appendChild(createElem('li', 1, 'active-page'));\r\n        ul.appendChild(createElem('li'));\r\n        ul.appendChild(createElem('li'));\r\n        ul.appendChild(createElem('li'));\r\n        nav.appendChild(ul);\r\n        footer.appendChild(nav);\r\n        return footer;\r\n    }\r\n\r\n    createMain() {\r\n        const main = document.createElement('main');\r\n        const inputWrapper = createElem('div', null, 'input-wrapper');\r\n        const videoWrapper = createElem('div', null, 'video-wrapper');\r\n        const span = document.createElement('span');\r\n        const input = document.createElement('input');\r\n        input.setAttribute('type', 'text');\r\n        input.setAttribute('placeholder', 'Search for YouTube videos');\r\n        inputWrapper.appendChild(span);\r\n        inputWrapper.appendChild(input);\r\n        main.appendChild(inputWrapper);\r\n        main.appendChild(videoWrapper);\r\n        return main;\r\n    }\r\n\r\n    createVideoInfo(data, IDs) {\r\n        const article = createElem('article', null, 'video-info');\r\n        const id = typeof data.id === 'string' ? data.id : data.id.videoId;\r\n        if (~IDs.indexOf(id)) {\r\n            article.classList.add('active-bookmark');\r\n        }\r\n        article.setAttribute('id', id);\r\n        const img = document.createElement('img');\r\n        const divDefinition = createElem('div', null, 'defenition');\r\n        const videoTitle = createElem('h2', data.snippet.title, 'video-title');\r\n        const authorBox = createElem('p', null, 'author-box');\r\n        const author = createElem('span', data.snippet.channelTitle, 'author');\r\n        const videoDate = createElem('span', data.snippet.publishedAt.slice(0, 10), 'date');\r\n        const videoDescription = createElem('p', data.snippet.description, 'description');\r\n        const divViews = createElem('div', data.statistics.viewCount, 'views');\r\n        const divLikes = createElem('div', data.statistics.likeCount, 'likes');\r\n        const divBookmark = createElem('div', null, 'bookmark');\r\n        const viewsIcon = createElem('i', null, 'fa', 'fa-eye');\r\n        const likesIcon = createElem('i', null, 'fa', 'fa-thumbs-o-up');\r\n        const bookmarkIcon = createElem('i', null, 'fa', 'fa-bookmark-o');\r\n\r\n        article.appendChild(img);\r\n        article.appendChild(divDefinition);\r\n        article.appendChild(divViews);\r\n        article.appendChild(divLikes);\r\n        article.appendChild(divBookmark);\r\n        authorBox.appendChild(author);\r\n        authorBox.appendChild(videoDate);\r\n        divDefinition.appendChild(videoTitle);\r\n        divDefinition.appendChild(authorBox);\r\n        divDefinition.appendChild(videoDescription);\r\n        divBookmark.appendChild(bookmarkIcon);\r\n        divViews.insertBefore(viewsIcon, divViews.firstChild);\r\n        divLikes.insertBefore(likesIcon, divLikes.firstChild);\r\n\r\n        img.setAttribute('src', data.snippet.thumbnails.medium.url);\r\n        img.setAttribute('alt', data.snippet.title);\r\n        videoTitle.setAttribute('title', data.snippet.title);\r\n        authorBox.setAttribute('title', data.snippet.channelTitle);\r\n        return article;\r\n    }\r\n\r\n    createArticles(articles, IDs) {\r\n        const fragment = document.createDocumentFragment();\r\n        for (var i = 0; i < articles.length; i++) {\r\n            fragment.appendChild(this.createVideoInfo(articles[i], IDs));\r\n        }\r\n        return fragment;\r\n    }\r\n\r\n    createSearchHistoryList() {\r\n        function createSearchListItem(text, data) {\r\n            const li = document.createElement('li');\r\n            const searchText = createElem('span', text, 'search-text');\r\n            const searchData = createElem('span', data, 'search-date');\r\n            li.appendChild(searchText);\r\n            li.appendChild(searchData);\r\n            return li;\r\n        }\r\n        const ul = createElem('ul', null, 'search-list');\r\n        if (!localStorage.getItem('youTubeSearchHistory')) {\r\n            ul.appendChild(createSearchListItem(\r\n                'There is no search history yet ; -)'\r\n            ));\r\n            return ul;\r\n        }\r\n        const history = JSON.parse(localStorage.getItem('youTubeSearchHistory'));\r\n        history.reverse();\r\n        for (let i = 0; i < history.length; i++) {\r\n            ul.appendChild(createSearchListItem(history[i][0], history[i][1]));\r\n        }\r\n        return ul;\r\n    }\r\n\r\n    createBookmarksList (articles, IDs) {\r\n        if (!articles.length) {\r\n            const ul = createElem('ul', null, 'search-list');\r\n            ul.appendChild(createElem(\r\n                'li',\r\n                'There is no bookmarks yet ; -)'\r\n            ));\r\n            return ul;\r\n        } else {\r\n            return this.createArticles(articles, IDs);\r\n        }\r\n    }\r\n\r\n    createNoSearchResultMessage () {\r\n        const ul = createElem('ul', null, 'search-list');\r\n        ul.appendChild(createElem(\r\n            'li',\r\n            'There is no search result ; -)'\r\n        ));\r\n        return ul;\r\n    }\r\n}\r\n\r\nexport default ElementFactory;\n\n\n// WEBPACK FOOTER //\n// ./src/ElementFactory.js","class ScreenWatcher {\r\n    constructor(pubSub) {\r\n        this.pubSub = pubSub;\r\n        this.resizeHandler = this.resizeHandler.bind(this);\r\n        window.addEventListener('resize', this.resizeHandler);\r\n    }\r\n\r\n    resizeHandler() {\r\n        const screenWidth = this.getScreenWidth();\r\n        this.pubSub.trigger('ScreenWatcher:changeWidth', screenWidth);\r\n    }\r\n\r\n    getScreenWidth() {\r\n        const screenWidth = window.outerWidth;\r\n        if(screenWidth > 1460) {\r\n            return 1460;\r\n        } else if (screenWidth > 1095) {\r\n            return 1095;\r\n        } else if (screenWidth > 730) {\r\n            return 730;\r\n        }\r\n        return 365;\r\n    }\r\n}\r\n\r\nexport default ScreenWatcher;\n\n\n// WEBPACK FOOTER //\n// ./src/ScreenWatcher.js","import {getStyle} from './utils.js';\r\n\r\nclass ContentController {\r\n    constructor(elementFactory, dataService, videoWrapper, pubSub) {\r\n        this.elementFactory = elementFactory;\r\n        this.dataService = dataService;\r\n        this.videoWrapper = videoWrapper;\r\n        this.pubSub = pubSub;\r\n        this.videoWrapperContent = [];\r\n        this.currentPageClass = 'search';\r\n        this.pageMargin = 0;\r\n        this.inputSearchHandler = this.inputSearchHandler.bind(this);\r\n        this.inputKeypressHandler = this.inputKeypressHandler.bind(this);\r\n        this.searchHistoryClickHandler = this.searchHistoryClickHandler.bind(this);\r\n        this.searchNowClickHandler = this.searchNowClickHandler.bind(this);\r\n        this.bookmarksClickHandler = this.bookmarksClickHandler.bind(this);\r\n        this.addToBookmarkHandler = this.addToBookmarkHandler.bind(this);\r\n        this.searchFormHistoryHandler = this.searchFormHistoryHandler.bind(this);\r\n        this.openYouTubeVideo = this.openYouTubeVideo.bind(this);\r\n        this.saveLinksToDOMElement();\r\n        this.bindEvents();\r\n    }\r\n\r\n    bindEvents() {\r\n        document.querySelector('main input').addEventListener(\r\n            'keypress', this.inputKeypressHandler\r\n        );\r\n        document.querySelector('.history').addEventListener(\r\n            'click', this.searchHistoryClickHandler\r\n        );\r\n        document.querySelector('.bookmarks').addEventListener(\r\n            'click', this.bookmarksClickHandler\r\n        );\r\n        this.inputWrapperSpanElement.addEventListener(\r\n            'click', this.inputSearchHandler\r\n        );\r\n        this.searchElement.addEventListener('click', this.searchNowClickHandler);\r\n        this.videoWrapper.addEventListener('click', this.addToBookmarkHandler);\r\n        this.videoWrapper.addEventListener('click', this.searchFormHistoryHandler);\r\n        this.videoWrapper.addEventListener('click', this.openYouTubeVideo);\r\n        this.pubSub.on('Swipe:swipeRight', (currentPage, totalPage) => {\r\n            if (totalPage - currentPage <= 2) {\r\n                this.dataService.getItems(this.searchValue, this.nextPageToken)\r\n                    .then((data) => {\r\n                        const fragment = this.elementFactory.createArticles(\r\n                            data.items, JSON.parse(localStorage.getItem('youTubeBookmarks')) || []\r\n                        );\r\n                        this.videoWrapper.appendChild(fragment);\r\n                        this.pubSub.trigger('ContentController:newArticles');\r\n                        this.nextPageToken = data.nextPageToken;\r\n                    });\r\n            }\r\n        });\r\n    }\r\n\r\n    saveLinksToDOMElement() {\r\n        this.searchElement = document.querySelector('.search');\r\n        this.inputWrapperSpanElement = document.querySelector('.input-wrapper span');\r\n        this.pageFooterElement = document.querySelector('.page-footer');\r\n        this.inputElement = document.querySelector('input');\r\n    }\r\n\r\n    inputKeypressHandler(e) {\r\n        if (e.keyCode !== 13) {\r\n            return;\r\n        }\r\n        const clickEvent = new Event('click');\r\n        this.inputWrapperSpanElement.dispatchEvent(clickEvent);\r\n        this.searchElement.dispatchEvent(clickEvent);\r\n    }\r\n\r\n    clearContent(saveVideoWrapperContent, className, e) {\r\n        if (e.target.classList.contains(`${className}`) &&\r\n            e.target.classList.contains('active-header-nav')\r\n        ) {\r\n            return false;\r\n        }\r\n        if (saveVideoWrapperContent) {\r\n            if (this.currentPageClass === 'search') {\r\n                this.pageMargin = parseInt(getStyle(this.videoWrapper).marginLeft);\r\n            }\r\n            this.videoWrapper.style.marginLeft = '0px';\r\n            if (!this.videoWrapperContent.length) {\r\n                while (this.videoWrapper.firstChild) {\r\n                    this.videoWrapperContent.push(\r\n                        this.videoWrapper.removeChild(this.videoWrapper.firstChild)\r\n                    );\r\n                }\r\n            } else {\r\n                while (this.videoWrapper.firstChild) {\r\n                    this.videoWrapper.removeChild(this.videoWrapper.firstChild);\r\n                }\r\n            }\r\n        } else {\r\n            this.videoWrapper.style.marginLeft = `${this.pageMargin}px`;\r\n            while (this.videoWrapper.firstChild) {\r\n                this.videoWrapper.removeChild(this.videoWrapper.firstChild);\r\n            }\r\n            for (let i = 0; i < this.videoWrapperContent.length; i++) {\r\n                this.videoWrapper.appendChild(this.videoWrapperContent[i]);\r\n            }\r\n            this.videoWrapperContent = [];\r\n        }\r\n        document.querySelector('.active-header-nav').classList.remove('active-header-nav');\r\n        document.querySelector(`.${className}`).classList.add('active-header-nav');\r\n        this.currentPageClass = className;\r\n        this.pageFooterElement.classList.add('hidden');\r\n        return true;\r\n    }\r\n\r\n    searchHistoryClickHandler(e) {\r\n        if (!this.clearContent(true, 'history', e)) {\r\n            return;\r\n        } else {\r\n            const tmp = this.elementFactory.createSearchHistoryList();\r\n            this.videoWrapper.appendChild(tmp);\r\n            this.pubSub.trigger('ContentController:searchHistory');\r\n        }\r\n    }\r\n\r\n    searchNowClickHandler(e) {\r\n        if (!this.clearContent(false, 'search', e)) {\r\n            return;\r\n        } else {\r\n            this.pubSub.trigger('ContentController:searchNow');\r\n        }\r\n    }\r\n\r\n    bookmarksClickHandler(e) {\r\n        if (!this.clearContent(true, 'bookmarks', e)) {\r\n            return;\r\n        } else {\r\n            this.loadBookmarks();\r\n        }\r\n    }\r\n\r\n    loadBookmarks() {\r\n        const videoIDs = JSON.parse(localStorage.getItem('youTubeBookmarks'));\r\n        if (videoIDs && videoIDs.length) {\r\n            this.dataService.getVideoInfoById(videoIDs, ['snippet', 'statistics'])\r\n                .then((data) => {\r\n                    const tmp = this.elementFactory.createBookmarksList(data.items, videoIDs);\r\n                    this.videoWrapper.appendChild(tmp);\r\n                    this.pubSub.trigger('ContentController:searchNow');\r\n                });\r\n        } else {\r\n            const tmp = this.elementFactory.createBookmarksList([]);\r\n            this.videoWrapper.appendChild(tmp);\r\n            this.pubSub.trigger('ContentController:searchHistory');\r\n        }\r\n    }\r\n\r\n    inputSearchHandler(e) {\r\n        const clickEvent = new Event('click');\r\n        this.searchElement.dispatchEvent(clickEvent);\r\n        this.pubSub.trigger('ContentController:searchNow');\r\n        const val = e.target.nextElementSibling.value;\r\n        if (val === '' || this.searchValue === val) {\r\n            return;\r\n        }\r\n        this.videoWrapper.style.marginLeft = '0px';\r\n        while (this.videoWrapper.firstChild) {\r\n            this.videoWrapper.removeChild(this.videoWrapper.firstChild);\r\n        }\r\n        this.dataService.getItems(val)\r\n            .then((data) => {\r\n                if (!data.items.length) {\r\n                    this.pubSub.trigger('ContentController:searchHistory');\r\n                    this.videoWrapper.appendChild(\r\n                        this.elementFactory.createNoSearchResultMessage()\r\n                    );\r\n                }\r\n                const fragment = this.elementFactory.createArticles(data.items,\r\n                    JSON.parse(localStorage.getItem('youTubeBookmarks')) || []\r\n                );\r\n                this.videoWrapper.appendChild(fragment);\r\n                this.searchValue = val;\r\n                this.pubSub.trigger('ContentController:newArticles');\r\n                this.nextPageToken = data.nextPageToken;\r\n            });\r\n        const youTubeSearchHistory = JSON.parse(localStorage.getItem('youTubeSearchHistory'));\r\n        if (youTubeSearchHistory) {\r\n            for (let i = 0; i < youTubeSearchHistory.length; i++) {\r\n                if (youTubeSearchHistory[i][0] === val) {\r\n                    youTubeSearchHistory.splice(i, 1);\r\n                }\r\n            }\r\n            youTubeSearchHistory.push([val, (new Date()).toString().substr(0, 25)]);\r\n            if (youTubeSearchHistory.length > 13) {\r\n                youTubeSearchHistory.splice(0, 1);\r\n            }\r\n            localStorage.setItem('youTubeSearchHistory', JSON.stringify(youTubeSearchHistory));\r\n            return;\r\n        }\r\n        const tmp = [[val, (new Date()).toString().substr(0, 24)]];\r\n        localStorage.setItem('youTubeSearchHistory', JSON.stringify(tmp));\r\n    }\r\n\r\n    deleteBookmarkFromVideoWrapperContent(id) {\r\n        for (let i = 0; i < this.videoWrapperContent.length; i++) {\r\n            if (this.videoWrapperContent[i].id === id) {\r\n                this.videoWrapperContent[i].classList.remove('active-bookmark');\r\n            }\r\n        }\r\n    }\r\n\r\n    addToBookmarkHandler(e) {\r\n        if (!e.target.classList.contains('fa-bookmark-o')) {\r\n            return;\r\n        }\r\n        const id = e.target.parentNode.parentNode.id;\r\n        e.target.parentNode.parentNode.classList.toggle('active-bookmark');\r\n        const youTubeBookmarks = JSON.parse(localStorage.getItem('youTubeBookmarks'));\r\n        if (youTubeBookmarks) {\r\n            for (let i = 0; i < youTubeBookmarks.length; i++) {\r\n                if (youTubeBookmarks[i] === id) {\r\n                    this.deleteBookmarkFromVideoWrapperContent(\r\n                        youTubeBookmarks.splice(i, 1).toString()\r\n                    );\r\n                    localStorage.setItem('youTubeBookmarks', JSON.stringify(youTubeBookmarks));\r\n                    return;\r\n                }\r\n            }\r\n            youTubeBookmarks.push(id);\r\n            localStorage.setItem('youTubeBookmarks', JSON.stringify(youTubeBookmarks));\r\n            return;\r\n        }\r\n        const tmp = [e.target.parentNode.parentNode.id];\r\n        localStorage.setItem('youTubeBookmarks', JSON.stringify(tmp));\r\n    }\r\n\r\n    searchFormHistoryHandler(e) {\r\n        if (\r\n            !e.target.classList.contains('search-text') &&\r\n            !e.target.classList.contains('search-date')\r\n        ) {\r\n            return;\r\n        }\r\n        if (e.target.classList.contains('search-text')) {\r\n            this.inputElement.value = e.target.innerHTML;\r\n        }\r\n        if (e.target.classList.contains('search-date')) {\r\n            this.inputElement.value = e.target.previousElementSibling.innerHTML;\r\n        }\r\n        const click = new Event('click');\r\n        this.searchElement.dispatchEvent(click);\r\n        this.inputWrapperSpanElement.dispatchEvent(click);\r\n    }\r\n\r\n    openYouTubeVideo(e) {\r\n        if (!e.target.classList.contains('video-title')) {\r\n            return;\r\n        }\r\n        const id = e.target.parentNode.parentNode.id;\r\n        window.open(`https://www.youtube.com/watch?v=${id}`);\r\n    }\r\n}\r\n\r\nexport default ContentController;\n\n\n// WEBPACK FOOTER //\n// ./src/ContentController.js","class DataService {\r\n    getVideoInfoByQuery(val, nextPage) {\r\n        return new Promise((resolve, reject) => {\r\n            const xhr = new XMLHttpRequest();\r\n            if (nextPage) {\r\n                xhr.open(\r\n                    'GET',\r\n                    'https://www.googleapis.com/youtube/v3/search?' +\r\n                    'key=AIzaSyBhRZ03_asTiwIY2DYwUWP8JvcAGkjHNqU&' +\r\n                    'type=video&' +\r\n                    'part=snippet&' +\r\n                    'maxResults=15&' +\r\n                    `pageToken=${nextPage}&` +\r\n                    `q=${val}?`,\r\n                    true\r\n                );\r\n            } else {\r\n                xhr.open(\r\n                    'GET',\r\n                    'https://www.googleapis.com/youtube/v3/search?' +\r\n                    'key=AIzaSyBhRZ03_asTiwIY2DYwUWP8JvcAGkjHNqU&' +\r\n                    'type=video&' +\r\n                    'part=snippet&' +\r\n                    'maxResults=15&' +\r\n                    `q=${val}?`,\r\n                    true\r\n                );\r\n            }\r\n            xhr.send();\r\n            xhr.onreadystatechange = () => {\r\n                if (xhr.readyState !== 4) {\r\n                    return;\r\n                }\r\n                resolve(JSON.parse(xhr.responseText));\r\n            };\r\n        });\r\n    }\r\n\r\n    getVideoInfoById(idMovies, part) {\r\n        return new Promise((resolve, reject) => {\r\n            const xhr = new XMLHttpRequest();\r\n            xhr.open(\r\n                'GET',\r\n                'https://www.googleapis.com/youtube/v3/videos?' +\r\n                'key=AIzaSyBhRZ03_asTiwIY2DYwUWP8JvcAGkjHNqU&' +\r\n                `part=${part}&` +\r\n                `id=${idMovies}`,\r\n                true\r\n            );\r\n            xhr.send();\r\n            xhr.onreadystatechange = () => {\r\n                if (xhr.readyState !== 4) {\r\n                    return;\r\n                }\r\n                resolve(JSON.parse(xhr.responseText));\r\n            };\r\n        });\r\n    }\r\n\r\n    getItems(val, nextPage) {\r\n        return this.getVideoInfoByQuery(val, nextPage)\r\n            .then((data) => {\r\n                const items = data.items;\r\n                const ids = items.map(item => item.id.videoId);\r\n                const nextPageToken = data.nextPageToken;\r\n                return this.getVideoInfoById(ids, ['snippet', 'statistics'])\r\n                    .then((idData) => {\r\n                        const idItems = idData.items;\r\n                        for (var i = 0; i < items.length; i++) {\r\n                            items[i].statistics = idItems[i].statistics;\r\n                            items[i].snippet = idItems[i].snippet;\r\n                        }\r\n                        return {\r\n                            items,\r\n                            nextPageToken,\r\n                        };\r\n                    });\r\n            });\r\n    }\r\n}\r\n\r\nexport default DataService;\n\n\n// WEBPACK FOOTER //\n// ./src/DataService.js"],"sourceRoot":""}